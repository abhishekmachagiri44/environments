name: Echo Workflow

on:
  push:
    branches:
      - main

jobs:
  job1:
    runs-on: self-hosted
    steps:
      - name: Set Content of .env file
        run: |
          # read the content of .env file in PowerShell
          $envContent = Get-Content 'C:\actions-runner\.env'
          # loop through each line and set as GitHub ENV variable
          $envContent | ForEach-Object {
            $line = $_
            $parts = $line -split ':', 2
            $key = $parts[0].Trim()
            $value = $parts[1].Trim()
            echo "$key=$value" >> $GITHUB_ENV
          }

      - name: Echo string with env.format
        run: |
          echo "FORMS-DB_PUBLISHPROFILE=$env:FORMS-DB_PUBLISHPROFILE"
          echo "FORMS-DB_DACPAC=$env:FORMS-DB_DACPAC"
          echo "FORMS-DB_CONNECTIONSTRING=$env:FORMS-DB_CONNECTIONSTRING"
